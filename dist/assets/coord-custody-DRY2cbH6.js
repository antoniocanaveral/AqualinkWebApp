import{cs as A,u as Y,bl as q,am as M,t as S,F as p,r as m,a6 as t,dW as L,j as e,aS as $,M as U,e as c,f as n,X as l,dX as W,dY as B,dZ as O,D as b,H as h,S as V,d_ as X,d$ as Z,e0 as G,Y as w,B as J,dz as K,aX as Q,aY as ee,e1 as se,e2 as _,$ as ae,y as re,e3 as ie,P as ne,e4 as te,aH as v,e5 as le,p as ce}from"./index-B54C9UsK.js";const de=$(y=>e.jsxs("slot",{children:[y.v0,y.v1]}),{name:"CoordinationCustody_1",portals:["v0","v1"]}),me=function(){var N;const D=[{path:"index",breadcrumbName:A.get("orgName")},{path:"first",breadcrumbName:"Coordinación"}],j=Y(),P=q();let{id:f}=M();const s=S(a=>a.custody.coordination),F=S(a=>a.custody.loading),[g]=p.useForm(),[r,u]=m.useState({status:"process",isFinished:!1,current:0,form:{answeredDate:s?s.answered_date?s.answered_date:s.planned_date:t()}}),{status:C,isFinished:R,current:x}=r;m.useEffect(()=>{j(L(f,()=>{}))},[j,f]),m.useLayoutEffect(()=>{const a=document.querySelectorAll(".ant-steps-item-active"),i=document.querySelectorAll(".ant-steps-item-finish");a.forEach(d=>{if(d.previousSibling){const o=d.previousSibling;o.classList.contains("success-step-item")?o.classList.remove("success-step-item"):o.classList.remove("wizard-step-item"),o.classList.add("wizard-steps-item-active")}}),i.forEach(d=>{if(d.previousSibling){const o=d.previousSibling;o.classList.remove("wizard-steps-item-active"),o.classList.add("success-step-item")}})});const z=()=>new Promise((a,i)=>{x<2?g.validateFields().then(()=>{u({...r,status:"process",current:x+1}),a()}).catch(d=>{v.error("Revise los datos requeridos!"),i(d)}):i()}),T=()=>new Promise((a,i)=>{x>0?(u({...r,status:"process",current:x-1}),a()):i()}),E=()=>{window.confirm("Confirma que desea enviar su respuesta a esta coordinación de pesca?")&&j(te(f,r.form,i=>{i?u({...r,status:"finish",isFinished:!0,current:0}):v.error("Ocurrió al enviar la coordinación.")}))},H=()=>{window.confirm("Estás seguro de querer rechazar esta coordinación ?")&&j(le(f,i=>{console.log(i),i?(v.success("Coordinación Rechazada."),P("/custody/coordinacion")):v.error("Ocurrió un error.")}))},k=[{key:"1",label:"Camaronera:",value:s?s.org_name:"-"},{key:"2",label:"Piscina:",value:s?s.warehouse_name:"-"},{key:"3",label:"Dirección:",value:s?`${s.City} ${s.Address1}, ${s.Address2}`:"-"},{key:"4",label:"Notificación:",value:s?s.SM_FishingNotification:"-"},{key:"5",label:"Fecha de Pesca Solicitada:",value:s?t(s.planned_date).format("DD-MM-YYYY hh:mm A"):"-"},{key:"6",label:"Tipo de Pesca:",value:s?s.fishing_type:"-"},{key:"7",label:"Tipo de Contenedor:",value:s?s.container_type:"-"},{key:"8",label:"Volumen de Pesca:",value:s?`${s.fishing_volume} lbs`:"-"},{key:"9",label:"Clasificación:",value:s?s.Classification:"-"},{key:"10",label:"Textura:",value:s?s.texture:"-"}],I=[{title:"",dataIndex:"label",key:"label",width:"55%",render:a=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{height:"5px",width:"5px",backgroundColor:"#012e40",borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),e.jsx("span",{children:a})]})},{title:"",dataIndex:"value",key:"value",width:"45%"}];return e.jsx(de,{v0:e.jsx(ne,{className:"ninjadash-page-header-main",title:`Responder Coordinación: ${s?s.SM_FishingNotification:"-"}`,routes:D}),v1:e.jsx(U,{children:e.jsx(c,{gutter:25,children:e.jsx(n,{sm:24,xs:24,children:e.jsx(m.Suspense,{fallback:e.jsx(l,{headless:!0,children:e.jsx(w,{paragraph:{rows:20},active:!0})}),children:e.jsx(l,{headless:!0,children:e.jsx(c,{justify:"center",children:e.jsx(n,{xxl:20,xs:24,children:e.jsx(W,{className:"ninjadash-wizard-page",children:e.jsx(B,{children:e.jsx(O,{isswitch:!0,current:x,status:C,steps:[{title:"Coordinación",className:"wizard-step-item",icon:e.jsx(K,{}),content:e.jsx(b,{style:{width:"100%"},children:e.jsx(c,{children:e.jsx(n,{sm:22,xs:24,children:e.jsx("div",{className:"create-account-form",style:{marginTop:"10px"},children:e.jsxs(p,{form:g,name:"account",style:{marginTop:"-50px"},layout:"vertical",children:[e.jsxs(h,{as:"h4",children:["1. Datos de la Coordinación ",F&&e.jsx(V,{})]}),e.jsx(c,{gutter:25,children:e.jsx(n,{sm:24,xs:24,children:e.jsx(m.Suspense,{fallback:e.jsx(l,{headless:!0,children:e.jsx(w,{paragraph:{rows:20},active:!0})}),children:e.jsx("div",{children:e.jsx(c,{gutter:25,children:e.jsx(n,{xl:24,xs:24,children:e.jsxs(m.Suspense,{fallback:e.jsx(l,{headless:!0,children:e.jsx(w,{active:!0})}),children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx(X,{style:{backgroundColor:"#0e92e7",marginRight:"10px"},children:((N=s==null?void 0:s.org_name)==null?void 0:N[0])||"E"}),e.jsx(Z.Title,{level:5,children:(s==null?void 0:s.org_name)||""})]}),e.jsx("br",{}),e.jsx(n,{xs:24,md:24,children:e.jsx(G,{data:k,pairsPerRow:2})})]})})})})})})}),e.jsxs(c,{gutter:16,children:[e.jsx(n,{xs:24,sm:18})," ",e.jsx(n,{xs:24,sm:6,style:{textAlign:"right",marginTop:"20px"},children:e.jsx(J,{size:"default",type:"danger",onClick:()=>H(),children:"Rechazar la Coordinación"})})]})]})})})})})},{title:"Información de Empacadora",className:"wizard-step-item",icon:e.jsx(se,{}),content:e.jsx(b,{className:"basic-form-inner",children:e.jsx("div",{className:"atbd-form-checkout",children:e.jsx(c,{justify:"center",children:e.jsx(n,{sm:22,xs:24,children:e.jsxs("div",{className:"shipping-form",children:[e.jsx(h,{as:"h4",children:"2. Información de Empacadora"}),e.jsxs(p,{form:g,name:"address",children:[e.jsx(p.Item,{name:"responsed_date",label:"Fecha Propuesta",initialValue:r.form.answeredDate?t(r.form.answeredDate):t(),rules:[{required:!0,message:"Por favor seleccione una Fecha"}],children:e.jsx(Q,{value:r.form.answeredDate,onChange:a=>{let i="";a&&(i=t(r.form.answeredDate),i.set({year:a.year(),month:a.month(),date:a.date()})),u({...r,form:{...r.form,answeredDate:i}})}})}),e.jsx(p.Item,{name:"response-time",label:"Hora Propuesta",initialValue:t(r.form.answeredDate?t(r.form.answeredDate).format("HH:mm"):"00:00","HH:mm"),rules:[{required:!0,message:"Por favor seleccione una Hora"}],children:e.jsx(ee,{value:r.form.answeredDate,onChange:a=>{let i=t(r.form.answeredDate);i.set({hour:a.hour(),minute:a.minute(),second:0,millisecond:0}),u({...r,form:{...r.form,answeredDate:i}})}})})]})]})})})})})},{title:"Resumen",className:"wizard-step-item",icon:e.jsx(ie,{}),content:C!=="finish"?e.jsx(b,{style:{width:"80%"},children:e.jsxs("div",{className:"atbd-review-order",style:{width:"100%"},children:[e.jsx(h,{as:"h4",children:"3. Resumen"}),e.jsxs(l,{bodyStyle:{borderRadius:10},headless:!0,children:[e.jsx("div",{className:"atbd-review-order__single",children:e.jsxs(l,{headless:!0,children:[e.jsx("div",{className:"atbd-review-order__shippingTitle",children:e.jsx(h,{as:"h5",children:"Coordinación Solicitada"})}),e.jsx("article",{className:"atbd-review-order__shippingInfo",children:e.jsx(_,{children:e.jsx(ae,{className:"custom-table_lab",dataSource:k,columns:I,pagination:!1,showHeader:!1,bordered:!0,rowClassName:()=>"custom-table-row"})})})]})}),e.jsx("div",{className:"atbd-review-order__single",children:e.jsxs(l,{headless:!0,children:[e.jsx("div",{children:e.jsx(h,{as:"h5",children:"Información del Empacadora"})}),e.jsx(_,{children:e.jsx("div",{className:"invoice-summary-inner",children:e.jsx("ul",{className:"summary-list",children:e.jsxs("li",{children:[e.jsx("span",{className:"summary-list-title",children:"Fecha y Hora propuesta:"}),e.jsx("span",{className:"summary-list-text",children:t(r.form.answeredDate).format("DD-MM-YYYY hh:mm A")})]})})})})]})})]})]})}):e.jsx(c,{justify:"center",style:{width:"100%"},children:e.jsx(n,{xl:21,xs:24,children:e.jsx("div",{className:"checkout-successful",children:e.jsx(l,{headless:!0,bodyStyle:{borderRadius:"20px"},children:e.jsxs(l,{headless:!0,children:[e.jsx("span",{className:"icon-success",children:e.jsx(re,{})}),e.jsx(h,{as:"h3",children:"Respuesta enviada"}),e.jsx("p",{children:"Tiene 2 días hábiles para cancelar la solicitud antes de que la camaronera envíe su desición."})]})})})})})}],onNext:z,onPrev:T,onDone:E,isfinished:R})})})})})})})})})})})},{Option:he}=ce;export{me as default};
