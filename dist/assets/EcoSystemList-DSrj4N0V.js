import{t as h,j3 as k,j4 as L,aJ as U,r as b,bl as S,u as F,j5 as B,cd as w,j6 as H,aH as v,j as s,e as M,H as I,dO as D,f as r,j7 as q,j8 as E,en as P,j9 as T,ja as _}from"./index-zxEALkft.js";import x from"./InfoCard-BCIRN56_.js";function O(d,l){return l==="/"?d==="/":d.startsWith(l)}function N(d){var g,f;const l=h(o=>o.auth.roles);let p=[];try{typeof l=="string"?p=JSON.parse(l):Array.isArray(l)&&(p=l)}catch{p=[]}const u=p.map(o=>{var i;return(i=o.name)==null?void 0:i.trim().toLowerCase()}).filter(Boolean),y=k.map(o=>o.trim().toLowerCase());if(u.some(o=>y.includes(o)))return!0;for(const o of u){const i=L[o];if(!i)continue;const c=(g=i.deny)==null?void 0:g.some(t=>O(d,t));if(((f=i.allow)==null?void 0:f.some(t=>O(d,t)))&&!c)return!0}return!1}const W=U.memo(()=>{const d=N("/farm"),l=N("/lab"),p=N("/custody"),[u,y]=b.useState(!0),A=S(),g=F();b.useEffect(()=>{g(B()).then(()=>{y(!1),w.set("farmsExist",o.length>0?"true":"false"),w.set("labsExist",c.length>0?"true":"false"),w.set("custodyExist",t.length>0?"true":"false")}).catch(()=>y(!1))},[g]);const f=h(e=>e.auth.withFarms),o=h(e=>e.auth.farmsOrgs),i=h(e=>e.auth.withLabs),c=h(e=>e.auth.labsOrgs),C=h(e=>e.auth.withCustody),t=h(e=>e.auth.custodyOrgs),m=JSON.parse(decodeURIComponent(w.get("roles")||"[]")).some(e=>e.name==="Cumplimiento - Auditor Externo"),j=b.useCallback((e,a,n)=>{g(H(e,a,()=>{A(n)}))},[A,g]),R=[{id:"labs",img:"Laboratorios.png",icon:"biomasa.svg",label:"AquaLink - Laboratorios",total:c.length,type:"secondary",status:i?"growth":"down",canAccess:i,accessItems:c,onPress:()=>{var e,a,n;if(!l){v.warning("No tienes acceso a Laboratorios");return}j("LAB",{orgId:(e=c[0])==null?void 0:e.orgId,orgName:(a=c[0])==null?void 0:a.orgName,orgEmail:(n=c[0])==null?void 0:n.orgEmail},"/lab/panel")}},{id:"farms",img:"Camaroneras.png",icon:"biomasa.svg",label:"AquaLink - Camaroneras",total:o.length,type:"success",status:f?"growth":"down",canAccess:f,accessItems:o,onPress:()=>{var e,a,n;if(!d){v.warning("No tienes acceso a Camaroneras");return}j("FARM",{orgId:(e=o[0])==null?void 0:e.orgId,orgName:(a=o[0])==null?void 0:a.orgName,orgEmail:(n=o[0])==null?void 0:n.orgEmail},"/farm")}},{id:"custody",img:"Empacadoras.png",icon:"biomasa.svg",label:"AquaLink - Custodia",total:t.length,type:"info",status:C?"growth":"down",canAccess:C,accessItems:t,onPress:()=>{var e,a,n;if(!p){v.warning("No tienes acceso a Custodia");return}j("CUSTODY",{orgId:(e=t[0])==null?void 0:e.orgId,orgName:(a=t[0])==null?void 0:a.orgName,orgEmail:(n=t[0])==null?void 0:n.orgEmail},"/custody")}}];return s.jsxs(M,{gutter:24,children:[s.jsx("br",{}),s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",zIndex:2},children:s.jsxs("figure",{style:{textAlign:"center"},children:[s.jsx(I,{as:"h2",children:"Hola!"}),s.jsx(D,{size:70,children:"EG"}),s.jsx("figcaption",{children:s.jsx(I,{as:"h5",children:"Esteban Gallegos"})}),s.jsx("p",{children:"Bienvenido a Aqualink"})]})}),s.jsx("div",{className:"background",children:[...Array(12)].map((e,a)=>s.jsx("span",{},a))}),s.jsx(r,{xl:24,xs:24,children:s.jsxs("div",{className:"flex_row",children:[s.jsx(q,{}),s.jsx(E,{title:"Smart Apps & WebApps"})]})}),R.map(e=>s.jsx(r,{xl:8,md:8,xs:24,children:s.jsx("div",{style:{pointerEvents:u?"none":"auto",opacity:u?.5:1,cursor:u?"not-allowed":"pointer"},children:s.jsx(P,{data:e,bottomStatus:!0,contentFirst:!0,halfCircleIcon:!0,onClick:u?null:e.onPress})})},e.id)),s.jsx(r,{xl:24,xs:24,children:s.jsxs("div",{className:"flex_row",children:[s.jsx(T,{}),s.jsx(E,{title:"Solutions"})]})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx("div",{onClick:()=>j("MONITORING",{orgId:null,orgName:null,orgEmail:null},"/monitoring"),style:{cursor:m?"pointer":"not-allowed",opacity:m?1:.5,pointerEvents:m?"auto":"none"},children:s.jsx(x,{icon:"UilAnalytics",img:"M&E.png",type:"solutions"})})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx("div",{onClick:()=>j("NETWORK",{orgId:null,orgName:null,orgEmail:null},"/network"),children:s.jsx(x,{icon:"SiCoinmarketcap",iconLib:"si",img:"Network.png",type:"solutions"})})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx("div",{onClick:m?()=>j("CONTROL",{orgId:null,orgName:null,orgEmail:null},"/control"):null,style:{cursor:m?"pointer":"not-allowed",opacity:m?1:.5,pointerEvents:m?"auto":"none"},children:s.jsx(x,{icon:"UilMonitorHeartRate",img:"Control.png",type:"solutions"})})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx(x,{icon:"UilAnalysis",img:"Analytics.png",type:"solutions"})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx(x,{icon:"UilSetting",img:"ERP.png",type:"solutions"})}),s.jsx(r,{xs:24,xl:8,md:8,children:s.jsx(x,{icon:"UilBriefcaseAlt",img:"B2b.png",type:"solutions"})}),s.jsxs(r,{xs:8,children:[s.jsxs("div",{className:"flex_row",children:[s.jsx(_,{}),s.jsx(E,{title:"Knowledge Center"})]}),s.jsx(x,{icon:"UilBrain",img:"AquaDemia.png",type:"solutions"})]})]})});export{W as default};
