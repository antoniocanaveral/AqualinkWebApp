import{aJ as $,j as e,cZ as i,N as o,gR as H,gS as J,bc as P,cp as B,dc as G,gT as Q,ay as h,u as W,t as Z,r as w,a6 as p,H as N,L as a,be as z,G as C,J as k,gU as X,aQ as _,aR as ee}from"./index-B54C9UsK.js";import{F as te}from"./index-dukHIMAM.js";import{c as se,d as ae,e as ne,S as le}from"./Compose-BYwp1_ju.js";import{A as re}from"./autoComplete-DQR1UwVp.js";import{t as ie}from"./utilities-DrZkDkFt.js";import{o as oe,a as ce,b as de}from"./actionCreator-Cry4Cj_u.js";const D=$.memo(({refreshState:c})=>e.jsxs(se,{children:[e.jsx(i,{placement:"bottom",title:"Refresh",children:e.jsx(o,{onClick:c,to:"/refresh",children:e.jsx(H,{})})}),e.jsx(i,{placement:"bottom",title:"Archive",children:e.jsx(o,{to:"/",children:e.jsx(J,{})})}),e.jsx(i,{placement:"bottom",title:"Info",children:e.jsx(o,{to:"/",children:e.jsx(P,{})})}),e.jsx(i,{placement:"bottom",title:"Delete",children:e.jsx(o,{to:"/",children:e.jsx(B,{})})}),e.jsx(i,{placement:"bottom",title:"Read",children:e.jsx(o,{to:"/",children:e.jsx(G,{})})}),e.jsx(i,{placement:"bottom",title:"Folder",children:e.jsx(o,{to:"/",children:e.jsx(Q,{})})})]}));D.propTypes={refreshState:h.func.isRequired};function me({searchData:c,email:d}){const u=W(),{rtl:b}=Z(t=>({rtl:t.ChangeLayoutMode.rtlData})),[n,l]=w.useState({selectedRowKeys:[],notData:c,emails:d,sort:!0}),{selectedRowKeys:f,notData:v,emails:g,sort:x}=n;w.useEffect(()=>{l({emails:d,selectedRowKeys:f,sort:x})},[d,f,x]);const A=t=>{const r=c!==void 0&&c.filter(s=>s.title.toUpperCase().startsWith(t.toUpperCase()));l({...n,notData:r})},Y=t=>{t.preventDefault(),l({...n,emails:d})},E=t=>{u(oe(t))},R=[];g!==void 0&&g.map((t,r)=>{const{id:s,type:S,userName:m,status:V,img:F,subject:M,body:q,attach:U,stared:I}=t,O=p(s).format("MM-DD-YYYY")===p().format("MM-DD-YYYY");return R.push({key:s,name:e.jsxs(ne,{children:[e.jsx(a,{onClick:()=>{E(s)},to:"#",className:I?"starActive":"starDeactivate",children:e.jsx(te,{name:"star-o"})}),e.jsx("img",{src:require(`../../../${F}`),alt:""}),e.jsx(N,{as:"h5",children:e.jsx(a,{to:"#",children:m})})]}),email:t.email,status:V,content:e.jsxs(ae,{children:[e.jsxs(N,{as:"h5",children:[e.jsx(a,{to:`/admin/email/single/${s}`,children:M}),e.jsx("span",{className:`mail-badge ${r<=1?"primary":""}`,children:S})]}),e.jsx("p",{children:ie(q,10)}),U.length?U.map(y=>e.jsxs("a",{className:"btn-attachment",download:!0,href:require(`../../../static/img/email/${y}`),children:[e.jsx(z,{}),y]},y)):null]}),time:e.jsx("span",{className:"email-time",children:O?p(s).format("hh:mm A"):p(s).format("LL")})})});const K=(t,r,s)=>{l({...n,sortedInfo:s})},j=t=>{const{filter:r,byValue:s}=t,S=g.filter(m=>m[r]===s).map(m=>m.id);l({...n,selectedRowKeys:S})},L={selectedRowKeys:f,onChange:t=>{l({...n,selectedRowKeys:t})},hideDefaultSelections:!0,selections:[{key:"all",text:"All",onSelect:()=>{const t=d.map(r=>r.id);l({...n,selectedRowKeys:t})}},{key:"read",text:"Read",onSelect:j.bind(null,{filter:"status",byValue:"read"})},{key:"unread",text:"Unread",onSelect:j.bind(null,{filter:"status",byValue:"unread"})},{key:"stared",text:"Stared",onSelect:j.bind(null,{filter:"stared",byValue:!0})},{key:"unstared",text:"Unstared",onSelect:j.bind(null,{filter:"status",byValue:!1})}]},T=[{title:e.jsx(D,{refreshState:Y}),dataIndex:"name"},{title:e.jsx("div",{className:"email-top-search",children:e.jsx(re,{placeholder:"Search mail",onSearch:A,dataSource:v,width:"80%",patterns:!0})}),dataIndex:"content"},{title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"email-top-right d-flex align-items-center",children:[e.jsx("span",{className:"page-number",children:"1 - 50 of 235"}),e.jsxs("div",{className:"pagination-slider",children:[e.jsx(a,{className:"btn-paging",to:"#",children:b?e.jsx(k,{}):e.jsx(C,{})}),e.jsx(a,{className:"btn-paging",to:"#",children:b?e.jsx(C,{}):e.jsx(k,{})})]}),e.jsxs("div",{className:"email-extra",children:[e.jsx(a,{onClick:()=>{l({...n,sort:!x}),u(x?ce():de())},to:"#",children:e.jsx(X,{})}),e.jsx(_,{content:e.jsxs(e.Fragment,{children:[e.jsx(a,{to:"#",children:e.jsx("span",{children:"Newest"})}),e.jsx(a,{to:"#",children:e.jsx("span",{children:"Oldest"})}),e.jsx(a,{to:"#",children:e.jsx("span",{children:"Unread"})})]}),children:e.jsx(a,{to:"#",children:e.jsx(ee,{})})})]})]})}),dataIndex:"time",key:"time"}];return e.jsx(le,{className:"table-responsive",pagination:!1,rowSelection:L,columns:T,dataSource:R,onChange:K})}me.propTypes={searchData:h.arrayOf(h.object).isRequired,email:h.arrayOf(h.object).isRequired};export{me as C};
