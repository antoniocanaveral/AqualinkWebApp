import{c0 as k,cy as R,c1 as S,c2 as D,aJ as h,cW as b,dS as M,bq as F,br as K,cx as V,r as g,bo as L,bp as I,cZ as P}from"./index-B54C9UsK.js";import{R as T}from"./StarFilled-BJ9nENpS.js";function B(c){var f=c.pageXOffset,i="scrollLeft";if(typeof f!="number"){var a=c.document;f=a.documentElement[i],typeof f!="number"&&(f=a.body[i])}return f}function j(c){var f,i,a=c.ownerDocument,e=a.body,o=a&&a.documentElement,t=c.getBoundingClientRect();return f=t.left,i=t.top,f-=o.clientLeft||e.clientLeft||0,i-=o.clientTop||e.clientTop||0,{left:f,top:i}}function W(c){var f=j(c),i=c.ownerDocument,a=i.defaultView||i.parentWindow;return f.left+=B(a),f.left}var X=function(c){k(i,c);var f=R(i);function i(){var a;S(this,i);for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return a=f.call.apply(f,[this].concat(o)),a.onHover=function(n){var l=a.props,s=l.onHover,r=l.index;s(n,r)},a.onClick=function(n){var l=a.props,s=l.onClick,r=l.index;s(n,r)},a.onKeyDown=function(n){var l=a.props,s=l.onClick,r=l.index;n.keyCode===13&&s(n,r)},a}return D(i,[{key:"getClassName",value:function(){var e=this.props,o=e.prefixCls,t=e.index,n=e.value,l=e.allowHalf,s=e.focused,r=t+1,u=o;return n===0&&t===0&&s?u+=" ".concat(o,"-focused"):l&&n+.5>=r&&n<r?(u+=" ".concat(o,"-half ").concat(o,"-active"),s&&(u+=" ".concat(o,"-focused"))):(u+=r<=n?" ".concat(o,"-full"):" ".concat(o,"-zero"),r===n&&s&&(u+=" ".concat(o,"-focused"))),u}},{key:"render",value:function(){var e=this.onHover,o=this.onClick,t=this.onKeyDown,n=this.props,l=n.disabled,s=n.prefixCls,r=n.character,u=n.characterRender,p=n.index,d=n.count,v=n.value,m=typeof r=="function"?r(this.props):r,C=h.createElement("li",{className:this.getClassName()},h.createElement("div",{onClick:l?null:o,onKeyDown:l?null:t,onMouseMove:l?null:e,role:"radio","aria-checked":v>p?"true":"false","aria-posinset":p+1,"aria-setsize":d,tabIndex:l?-1:0},h.createElement("div",{className:"".concat(s,"-first")},m),h.createElement("div",{className:"".concat(s,"-second")},m)));return u&&(C=u(C,this.props)),C}}]),i}(h.Component);function H(){}var _=function(c){k(i,c);var f=R(i);function i(a){var e;S(this,i),e=f.call(this,a),e.stars=void 0,e.rate=void 0,e.onHover=function(t,n){var l=e.props.onHoverChange,s=e.getStarValue(n,t.pageX),r=e.state.cleanedValue;s!==r&&e.setState({hoverValue:s,cleanedValue:null}),l(s)},e.onMouseLeave=function(){var t=e.props.onHoverChange;e.setState({hoverValue:void 0,cleanedValue:null}),t(void 0)},e.onClick=function(t,n){var l=e.props.allowClear,s=e.state.value,r=e.getStarValue(n,t.pageX),u=!1;l&&(u=r===s),e.onMouseLeave(),e.changeValue(u?0:r),e.setState({cleanedValue:u?r:null})},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0}),t&&t()},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),t&&t()},e.onKeyDown=function(t){var n=t.keyCode,l=e.props,s=l.count,r=l.allowHalf,u=l.onKeyDown,p=l.direction,d=p==="rtl",v=e.state.value;n===b.RIGHT&&v<s&&!d?(r?v+=.5:v+=1,e.changeValue(v),t.preventDefault()):n===b.LEFT&&v>0&&!d||n===b.RIGHT&&v>0&&d?(r?v-=.5:v-=1,e.changeValue(v),t.preventDefault()):n===b.LEFT&&v<s&&d&&(r?v+=.5:v+=1,e.changeValue(v),t.preventDefault()),u&&u(t)},e.saveRef=function(t){return function(n){e.stars[t]=n}},e.saveRate=function(t){e.rate=t};var o=a.value;return o===void 0&&(o=a.defaultValue),e.stars={},e.state={value:o,focused:!1,cleanedValue:null},e}return D(i,[{key:"componentDidMount",value:function(){var e=this.props,o=e.autoFocus,t=e.disabled;o&&!t&&this.focus()}},{key:"getStarDOM",value:function(e){return M(this.stars[e])}},{key:"getStarValue",value:function(e,o){var t=this.props,n=t.allowHalf,l=t.direction,s=l==="rtl",r=e+1;if(n){var u=this.getStarDOM(e),p=W(u),d=u.clientWidth;(s&&o-p>d/2||!s&&o-p<d/2)&&(r-=.5)}return r}},{key:"focus",value:function(){var e=this.props.disabled;e||this.rate.focus()}},{key:"blur",value:function(){var e=this.props.disabled;e||this.rate.blur()}},{key:"changeValue",value:function(e){var o=this.props.onChange;"value"in this.props||this.setState({value:e}),o(e)}},{key:"render",value:function(){for(var e=this.props,o=e.count,t=e.allowHalf,n=e.style,l=e.id,s=e.prefixCls,r=e.disabled,u=e.className,p=e.character,d=e.characterRender,v=e.tabIndex,m=e.direction,C=this.state,E=C.value,x=C.hoverValue,O=C.focused,w=[],N=r?"".concat(s,"-disabled"):"",y=0;y<o;y+=1)w.push(h.createElement(X,{ref:this.saveRef(y),index:y,count:o,disabled:r,prefixCls:"".concat(s,"-star"),allowHalf:t,value:x===void 0?E:x,onClick:this.onClick,onHover:this.onHover,key:y,character:p,characterRender:d,focused:O}));var $=F(s,N,u,K({},"".concat(s,"-rtl"),m==="rtl"));return h.createElement("ul",{className:$,style:n,id:l,onMouseLeave:r?null:this.onMouseLeave,tabIndex:r?-1:v,onFocus:r?null:this.onFocus,onBlur:r?null:this.onBlur,onKeyDown:r?null:this.onKeyDown,ref:this.saveRate,role:"radiogroup"},w)}}],[{key:"getDerivedStateFromProps",value:function(e,o){return"value"in e&&e.value!==void 0?V(V({},o),{},{value:e.value}):o}}]),i}(h.Component);_.defaultProps={defaultValue:0,count:5,allowHalf:!1,allowClear:!0,style:{},prefixCls:"rc-rate",onChange:H,character:"â˜…",onHoverChange:H,tabIndex:0,direction:"ltr"};var z=function(c,f){var i={};for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&f.indexOf(a)<0&&(i[a]=c[a]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,a=Object.getOwnPropertySymbols(c);e<a.length;e++)f.indexOf(a[e])<0&&Object.prototype.propertyIsEnumerable.call(c,a[e])&&(i[a[e]]=c[a[e]]);return i},A=g.forwardRef(function(c,f){var i=c.prefixCls,a=c.tooltips,e=c.character,o=e===void 0?g.createElement(T,null):e,t=z(c,["prefixCls","tooltips","character"]),n=function(d,v){var m=v.index;return a?g.createElement(P,{title:a[m]},d):d},l=g.useContext(L),s=l.getPrefixCls,r=l.direction,u=s("rate",i);return g.createElement(_,I({ref:f,character:o,characterRender:n},t,{prefixCls:u,direction:r}))});export{A as R};
