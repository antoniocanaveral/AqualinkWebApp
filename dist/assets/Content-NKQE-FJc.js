import{aJ as $,j as e,cN as i,N as o,gL as H,gM as J,bc as P,ca as B,d0 as G,gN as Q,ay as h,u as W,t as z,r as U,a6 as p,H as w,L as a,be as X,G as C,J as k,gO as Z,aQ as _,aR as ee}from"./index-BJIB_XH5.js";import{F as te}from"./index-CXYGyrL1.js";import{c as se,d as ae,e as ne,S as le}from"./Compose-Bpp2ngSf.js";import{A as re}from"./autoComplete-CnYeSWuI.js";import{t as ie}from"./utilities-DrZkDkFt.js";import{o as oe,a as ce,b as de}from"./actionCreator-DKUFm_h1.js";const D=$.memo(({refreshState:c})=>e.jsxs(se,{children:[e.jsx(i,{placement:"bottom",title:"Refresh",children:e.jsx(o,{onClick:c,to:"/refresh",children:e.jsx(H,{})})}),e.jsx(i,{placement:"bottom",title:"Archive",children:e.jsx(o,{to:"/",children:e.jsx(J,{})})}),e.jsx(i,{placement:"bottom",title:"Info",children:e.jsx(o,{to:"/",children:e.jsx(P,{})})}),e.jsx(i,{placement:"bottom",title:"Delete",children:e.jsx(o,{to:"/",children:e.jsx(B,{})})}),e.jsx(i,{placement:"bottom",title:"Read",children:e.jsx(o,{to:"/",children:e.jsx(G,{})})}),e.jsx(i,{placement:"bottom",title:"Folder",children:e.jsx(o,{to:"/",children:e.jsx(Q,{})})})]}));D.propTypes={refreshState:h.func.isRequired};function me({searchData:c,email:d}){const u=W(),{rtl:b}=z(t=>({rtl:t.ChangeLayoutMode.rtlData})),[n,l]=U.useState({selectedRowKeys:[],notData:c,emails:d,sort:!0}),{selectedRowKeys:f,notData:v,emails:g,sort:x}=n;U.useEffect(()=>{l({emails:d,selectedRowKeys:f,sort:x})},[d,f,x]);const A=t=>{const r=c!==void 0&&c.filter(s=>s.title.toUpperCase().startsWith(t.toUpperCase()));l({...n,notData:r})},L=t=>{t.preventDefault(),l({...n,emails:d})},Y=t=>{u(oe(t))},R=[];g!==void 0&&g.map((t,r)=>{const{id:s,type:y,userName:m,status:V,img:F,subject:O,body:T,attach:N,stared:q}=t,I=p(s).format("MM-DD-YYYY")===p().format("MM-DD-YYYY");return R.push({key:s,name:e.jsxs(ne,{children:[e.jsx(a,{onClick:()=>{Y(s)},to:"#",className:q?"starActive":"starDeactivate",children:e.jsx(te,{name:"star-o"})}),e.jsx("img",{src:require(`../../../${F}`),alt:""}),e.jsx(w,{as:"h5",children:e.jsx(a,{to:"#",children:m})})]}),email:t.email,status:V,content:e.jsxs(ae,{children:[e.jsxs(w,{as:"h5",children:[e.jsx(a,{to:`/admin/email/single/${s}`,children:O}),e.jsx("span",{className:`mail-badge ${r<=1?"primary":""}`,children:y})]}),e.jsx("p",{children:ie(T,10)}),N.length?N.map(S=>e.jsxs("a",{className:"btn-attachment",download:!0,href:require(`../../../static/img/email/${S}`),children:[e.jsx(X,{}),S]},S)):null]}),time:e.jsx("span",{className:"email-time",children:I?p(s).format("hh:mm A"):p(s).format("LL")})})});const E=(t,r,s)=>{l({...n,sortedInfo:s})},j=t=>{const{filter:r,byValue:s}=t,y=g.filter(m=>m[r]===s).map(m=>m.id);l({...n,selectedRowKeys:y})},K={selectedRowKeys:f,onChange:t=>{l({...n,selectedRowKeys:t})},hideDefaultSelections:!0,selections:[{key:"all",text:"All",onSelect:()=>{const t=d.map(r=>r.id);l({...n,selectedRowKeys:t})}},{key:"read",text:"Read",onSelect:j.bind(null,{filter:"status",byValue:"read"})},{key:"unread",text:"Unread",onSelect:j.bind(null,{filter:"status",byValue:"unread"})},{key:"stared",text:"Stared",onSelect:j.bind(null,{filter:"stared",byValue:!0})},{key:"unstared",text:"Unstared",onSelect:j.bind(null,{filter:"status",byValue:!1})}]},M=[{title:e.jsx(D,{refreshState:L}),dataIndex:"name"},{title:e.jsx("div",{className:"email-top-search",children:e.jsx(re,{placeholder:"Search mail",onSearch:A,dataSource:v,width:"80%",patterns:!0})}),dataIndex:"content"},{title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"email-top-right d-flex align-items-center",children:[e.jsx("span",{className:"page-number",children:"1 - 50 of 235"}),e.jsxs("div",{className:"pagination-slider",children:[e.jsx(a,{className:"btn-paging",to:"#",children:b?e.jsx(k,{}):e.jsx(C,{})}),e.jsx(a,{className:"btn-paging",to:"#",children:b?e.jsx(C,{}):e.jsx(k,{})})]}),e.jsxs("div",{className:"email-extra",children:[e.jsx(a,{onClick:()=>{l({...n,sort:!x}),u(x?ce():de())},to:"#",children:e.jsx(Z,{})}),e.jsx(_,{content:e.jsxs(e.Fragment,{children:[e.jsx(a,{to:"#",children:e.jsx("span",{children:"Newest"})}),e.jsx(a,{to:"#",children:e.jsx("span",{children:"Oldest"})}),e.jsx(a,{to:"#",children:e.jsx("span",{children:"Unread"})})]}),children:e.jsx(a,{to:"#",children:e.jsx(ee,{})})})]})]})}),dataIndex:"time",key:"time"}];return e.jsx(le,{className:"table-responsive",pagination:!1,rowSelection:K,columns:M,dataSource:R,onChange:E})}me.propTypes={searchData:h.arrayOf(h.object).isRequired,email:h.arrayOf(h.object).isRequired};export{me as C};
