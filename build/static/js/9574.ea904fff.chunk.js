"use strict";(self.webpackChunkHexaDash=self.webpackChunkHexaDash||[]).push([[9574],{48149:(e,a,r)=>{r.r(a),r.d(a,{AlertWrap:()=>i});var t=r(99985),s=r(19335);const i=(0,s.Ay)(t.A)`
  border-radius: ${e=>{let{shape:a}=e;return a?"40px":"4px"}} !important;
  border-width: 0px !important;
  margin: 15px 0 0 0!important;
  padding: 16.5px 20px!important;
  .ant-alert-message{
    line-height: 1.8;
    margin-bottom: 0 !important;
    font-size: 16px !important;
    font-weight: 500 !important;
  }
  &.ant-alert-with-description{
    .ant-alert-content{
      line-height: 1;
    }
    .ant-alert-message{
      margin-bottom: 10px !important;
      line-height: 1;
    }
    .ant-alert-description{
      font-size: 15px;
      line-height: 1.35;
    }
  }
  &.ant-alert-closable {
    .ant-alert-message{
      display: block;
    }
  }
  .ant-alert-message, 
  .ant-alert-description {
    color: ${e=>{let{type:a,theme:r}=e;return r[`${a}-color`]}};
  }
  &.ant-alert-with-description{
    .ant-alert-message{
      color: ${e=>{let{type:a,theme:r}=e;return r[`${a}-color`]}};
    }
  }
  .ant-alert-close-text{
    font-size: 12px;
    line-height: 1.5;
    font-weight: 500;
    color: #9299B8;
  }

  ${e=>{let{outlined:a,theme:r,type:t}=e;return a&&((e,a)=>`\n    border: 1px solid ${e[`${a}-color`]} !important;\n    background: #fff!important;\n    &:hover, &:focus, &:active {\n      .ant-alert-message, .ant-alert-message{\n        color: #fff;\n      }\n    }\n    .ant-alert-message, .ant-alert-message {\n      color: ${e=>{let{theme:r}=e;return r[`${a}-color`]}};\n    }\n  `)(r,t)}}

  ${e=>{let{showIcon:a,theme:r}=e;return a&&`padding: 16px 20px 20px!important;\n    alert-empty-message{\n      padding: 11px 40px 11px!important;\n    }\n    .ant-alert-icon{\n      top: 20px !important;\n      ${r.rtl?"right":"left"}: 15px !important;\n    }\n    .ant-alert-message{\n      margin-top: -2px;\n    }\n    i.ant-alert-icon {\n      color: ${e=>{let{type:a,theme:r}=e;return r[`${a}-color`]}} !important;\n      background: #ffffff80 !important;\n      height: 100%;\n      width: 50px;\n      position: absolute;\n      top: 0;\n      ${r.rtl?"right":"left"}: 0;\n    }`}}


  .ant-alert-close-icon {
    top: 12px !important;
    ${e=>{let{theme:a}=e;return a.rtl?"left":"right"}}: 20px !important;
    svg,
    span,
    img,
    i{
      width: 8px;
      height: 8px;
    }
  }
`},51773:(e,a,r)=>{r.r(a),r.d(a,{default:()=>n});r(9950);var t=r(48149),s=r(44414);function i(e){const{type:a,icon:r,message:i,description:n,showIcon:o,outlined:l,closable:c,closeText:d}=e;return(0,s.jsx)(t.AlertWrap,{message:i,type:a,description:n,closable:c,showIcon:o&&o,outlined:l,closeText:d&&d,icon:r&&r})}i.defaultProps={type:"success",message:"Hello there! A simple success alert\u2014check it out!"};const n=i},89574:(e,a,r)=>{r.r(a),r.d(a,{default:()=>B});var t=r(9950),s=r(57687),i=r(87827),n=r(92759),o=r(87094),l=r(41988),c=r(32212),d=r(90650),m=r(40577),u=r(99674),h=r(72449),f=r(28429),p=r(42074),g=r(73878),v=r(83678),x=r(11876),w=r(75581),y=r(47435),S=(r(65465),r(42017)),A=r(29355),j=r(67482),b=r(68826),_=(r(63593),r(59051)),C=r.n(_),D=r(41013),I=r(90556),k=r(16618),N=r(51844),E=r(51773),F=r(3510),$=r(77671),M=r(20662),O=r(27910),T=r(88439),z=r(44414);const B=function(){var e,a;const r=(0,g.wA)();let{id:_}=(0,f.g)();const B=(0,g.d4)((e=>e.custody.coordination)),P=(0,g.d4)((e=>e.custody.loading)),V=(0,g.d4)((e=>e.custody.drawerStamps)),q=(0,g.d4)((e=>e.custody.fishingId)),{carriers:L,error:K}=(0,g.d4)((e=>e.carriers)),[G,H]=(0,t.useState)(null);(0,t.useEffect)((()=>{r((0,O.fetchCarriers)()),r((0,T.fetchOrgFishingDrawerStamp)()),r((0,T.fetchOrgSecurityKits)("VAN")),r((0,T.fetchFishingDrawerInfo)(_)),r((0,T.fetchTreaters)())}),[r]);const[R]=i.A.useForm(),[W,Y]=(0,t.useState)({status:"process",isFinished:!1,current:0,showForm:!1,suggestedDrawerCount:0,form:{sealId:"",seal:"",van:"",drawers:0},drawerForm:{drawerId:"",drawerCount:"",drawerIce:"",drawerMetabisulfito:""},sm_ice:void 0,sm_metabisulfite:void 0,selectedTreater:void 0}),{organizationSecurityKits:Q=[],organizationFishingDrawerStamp:U=[],fishingDrawerInfo:J,fishingDrawerInfoLoading:X,treaters:Z,treatersLoading:ee}=(0,g.d4)((e=>e.bin_drawers||{})),[ae,re]=(0,t.useState)([]),[te,se]=(0,t.useState)([]),[ie,ne]=(0,t.useState)([]);(0,t.useEffect)((()=>{se(Q);const e=new Set(U.map((e=>e.sm_vehicle_id)).filter((e=>void 0!==e&&null!==e))),a=L.flatMap((a=>a.sm_vehicle.filter((a=>!e.has(a.id)))));ne(a)}),[Q,U,L]),(0,t.useEffect)((()=>{if(!X&&J.length>0){const e=J.map((e=>({van:e.sm_furgon,kitCode:e.sm_kitcode,seal1:e.SM_Stamp1,seal2:e.SM_Stamp2,drawerCaladas:e.sm_kdrawerscount,drawerSolidas:e.sm_sdrawerscount})));re(e)}}),[J,X]);const oe=[{title:"Furg\xf3n",dataIndex:"van",key:"van"},{title:"Kit de Seguridad",dataIndex:"kitCode",key:"kitCode"},{title:"Sello 1",dataIndex:"seal1",key:"seal1"},{title:"Sello 2",dataIndex:"seal2",key:"seal2"},{title:"Gavetas Caladas",dataIndex:"drawerCaladas",key:"drawerCaladas"},{title:"Gavetas S\xf3lidas",dataIndex:"drawerSolidas",key:"drawerSolidas"},{title:"Acciones",key:"actions",render:(e,a)=>(0,z.jsx)(h.Button,{type:"danger",onClick:()=>{(0,b.deleteDrawerStampByVehicle)(a.van,((e,r)=>{e?re(ae.filter((e=>e.van!==a.van))):r.error(r)}))},children:"Eliminar"})}],{status:le,isFinished:ce,current:de}=W;console.log(`current ${de}`),(0,t.useEffect)((()=>{r((0,b.loadCustodyCoord)(_,((e,a)=>{r((0,b.loadDrawerStampByCoord)(_,((e,r)=>{let t=Number(parseFloat(a.fishing_volume)/45).toFixed(0);Y({...W,suggestedDrawerCount:t})})))}))),r((0,b.loadDrawerByCoord)(_,((e,a)=>{Y({...W,current:0,drawerForm:{drawerId:a?a.id:"",drawerIce:a?a.SM_Ice:"",drawerMetabisulfito:a?a.SM_Metabisulfito:""}})})))}),[r,_]),(0,t.useLayoutEffect)((()=>{const e=document.querySelectorAll(".ant-steps-item-active"),a=document.querySelectorAll(".ant-steps-item-finish");e.forEach((e=>{if(e.previousSibling){const a=e.previousSibling;a.classList.contains("success-step-item")?a.classList.remove("success-step-item"):a.classList.remove("wizard-step-item"),a.classList.add("wizard-steps-item-active")}})),a.forEach((e=>{if(e.previousSibling){const a=e.previousSibling;a.classList.remove("wizard-steps-item-active"),a.classList.add("success-step-item")}}))}));const me=[];V&&V.length>0&&V.map(((e,a)=>me.push({van:(0,z.jsx)("span",{children:e.SM_Van}),stamp:(0,z.jsx)("span",{children:e.SM_Stamp}),drawers:(0,z.jsx)("span",{children:e.SM_DrawersCount}),action:(0,z.jsxs)("div",{className:"table-actions",style:{minWidth:"50px !important",textAlign:"center"},children:[(0,z.jsx)(p.N_,{className:"edit",title:"Editar",onClick:()=>{Y({...W,showForm:!0,form:{...W.form,sealId:e.id,seal:e.SM_Stamp,van:e.SM_Van,drawers:e.SM_DrawersCount}})},children:(0,z.jsx)(I.A,{})}),(0,z.jsx)(p.N_,{className:"edit",title:"Eliminar",onClick:()=>{window.confirm("Seguro deseas eliminar el Sello ? ")&&r((0,b.deleteDrawerStamp)(e.id,((e,a)=>{e?(n.Ay.success("El Sello se elimin\xf3 con exito!"),r((0,b.loadDrawerStampByCoord)(_,(()=>{ue()})))):n.Ay.error(a)})))},children:(0,z.jsx)(N.A,{})})]})})));const ue=()=>{Y({...W,showForm:!1,form:{...W.form,sealId:null,seal:null,van:null,drawers:0}})},he=[{key:"1",label:"Camaronera:",value:B?B.org_name:"-"},{key:"2",label:"Piscina:",value:B?B.warehouse_name:"-"},{key:"3",label:"Direcci\xf3n:",value:B?`${B.City} ${B.Address1}, ${B.Address2}`:"-"},{key:"4",label:"Notificaci\xf3n:",value:B?B.SM_FishingNotification:"-"},{key:"5",label:"Fecha de Pesca Confirmada:",value:B?C()(B.answered_date).format("DD-MM-YYYY HH:mm"):"-"},{key:"6",label:"Tipo de Pesca:",value:B?B.fishing_type:"-"},{key:"7",label:"Tipo de Contenedor:",value:B?B.container_type:"-"},{key:"8",label:"Volumen de Pesca:",value:B?`${B.fishing_volume} lbs`:"-"},{key:"9",label:"Clasificaci\xf3n:",value:B?B.Classification:"-"},{key:"10",label:"Textura:",value:B?B.texture:"-"}],fe=[{key:"3",label:"Hielo",value:`${W.sm_ice} saco${R.getFieldValue("drawerIce")>1?"s":""}`},{key:"4",label:"Metabisulfitos:",value:`${W.sm_metabisulfite} kg`},{key:"5",label:"Tratador:",value:R.getFieldValue("selectedTreater")&&(null===(e=Z.find((e=>e.value===R.getFieldValue("selectedTreater"))))||void 0===e?void 0:e.label)||"No seleccionado"}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.PageHeader,{onBack:()=>window.history.back(),title:`Gavetas para coordinaci\xf3n: ${B?B.SM_FishingNotification:"-"}`}),(0,z.jsx)(j.Main,{children:(0,z.jsx)(o.A,{gutter:25,children:(0,z.jsx)(l.A,{sm:24,xs:24,children:(0,z.jsx)(t.Suspense,{fallback:(0,z.jsx)(A.Cards,{headless:!0,children:(0,z.jsx)(c.A,{paragraph:{rows:20},active:!0})}),children:(0,z.jsx)(j.WizardBlock,{children:(0,z.jsx)(A.Cards,{headless:!0,children:(0,z.jsx)(o.A,{justify:"center",children:(0,z.jsx)(l.A,{xxl:20,xs:24,children:(0,z.jsx)(j.WizardWrapper,{className:"ninjadash-wizard-page",children:(0,z.jsx)(j.WizardTwo,{children:(0,z.jsx)($.StepsCoords,{isswitch:!0,current:de,status:le,steps:[{title:"Coordinaci\xf3n",className:"wizard-step-item",icon:(0,z.jsx)(x.A,{}),content:(0,z.jsx)(o.A,{justify:"center",children:(0,z.jsxs)(l.A,{sm:22,xs:24,children:[(0,z.jsxs)(S.default,{as:"h4",children:["1. Datos de la Coordinaci\xf3n ",P&&(0,z.jsx)(d.A,{})]}),(0,z.jsx)(M.default,{data:he,pairsPerRow:2})]})})},{title:"Informaci\xf3n de Gavetas",className:"wizard-step-item",icon:(0,z.jsx)(w.A,{}),content:(0,z.jsx)(j.BasicFormWrapper,{className:"basic-form-inner",style:{width:"80%"},children:(0,z.jsx)("div",{className:"atbd-form-checkout",children:(0,z.jsx)(o.A,{justify:"center",children:(0,z.jsx)(l.A,{sm:22,xs:24,children:(0,z.jsxs)("div",{className:"shipping-form",children:[(0,z.jsx)(S.default,{as:"h4",children:"2. Informaci\xf3n de Gavetas"}),!W.showForm&&(0,z.jsxs)(i.A,{form:R,name:"drawerForm",children:[(0,z.jsx)("div",{style:{marginBottom:15},children:(0,z.jsx)(E.default,{showIcon:!0,icon:(0,z.jsx)(F.A,{}),message:"Cantidad de Gavetas",description:`El volumen de pesca es ${B?B.fishing_volume:""} lbs, cada gaveta tiene una capacidad m\xe1xima de 45 lbs, para poder enviar la informaci\xf3n de esta coordinaci\xf3n necesita registrar al menos un total de ${W.suggestedDrawerCount} gaveta${W.suggestedDrawerCount>1?"s":""}.`,type:"info"})}),(0,z.jsxs)(o.A,{gutter:16,children:[(0,z.jsx)(l.A,{sm:8,xs:24,children:(0,z.jsx)(i.A.Item,{name:"sm_ice",label:"Hielo (#Sacos)",rules:[{required:!0,message:"Por favor ingrese la cantidad de hielo"},{type:"integer",message:"Debe ser un n\xfamero entero"}],children:(0,z.jsx)(m.A,{style:{width:"100%"},value:W.sm_ice,onChange:e=>Y({...W,sm_ice:e})})})}),(0,z.jsx)(l.A,{sm:8,xs:24,children:(0,z.jsx)(i.A.Item,{name:"sm_metabisulfite",label:"Metabisulfitos (kg)",rules:[{required:!0,message:"Por favor ingrese la cantidad de metabisulfitos"},{type:"number",message:"Debe ser un n\xfamero v\xe1lido"}],children:(0,z.jsx)(m.A,{style:{width:"100%"},value:W.sm_metabisulfite,onChange:e=>Y({...W,sm_metabisulfite:e})})})}),Z.length>0?(0,z.jsx)(l.A,{sm:8,xs:24,children:(0,z.jsx)(i.A.Item,{name:"selectedTreater",label:"Seleccionar Tratador",rules:[{required:!0,message:"Por favor seleccione un tratador"}],children:(0,z.jsx)(u.A,{loading:ee,placeholder:"Selecciona un tratador",allowClear:!0,value:W.selectedTreater,onChange:e=>Y({...W,selectedTreater:e}),children:null===Z||void 0===Z?void 0:Z.map((e=>(0,z.jsx)(u.A.Option,{value:e.value,children:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.value)))})})}):null]})]}),W.showForm&&(0,z.jsx)(i.A,{form:R,name:"binform",children:(0,z.jsxs)(j.GridStyleGutter,{children:[(0,z.jsxs)(o.A,{justify:"center",gutter:16,style:{marginBottom:15},children:[(0,z.jsx)(l.A,{xs:24,sm:24,md:8,lg:8,xl:7,className:"gutter-row",children:(0,z.jsx)(i.A.Item,{label:"Transportista",name:"carrier",rules:[{required:!0,message:"Seleccione un transportista"}],children:(0,z.jsx)(u.A,{placeholder:"Selecciona Transportista",onChange:e=>{H(e),R.setFieldsValue({vehicle:void 0})},value:G,children:L.map((e=>(0,z.jsx)(u.A.Option,{value:e.id,children:e.Name},e.id)))})})}),(0,z.jsx)(l.A,{xs:24,sm:24,md:8,lg:8,xl:7,className:"gutter-row",children:(0,z.jsx)(i.A.Item,{label:"Furg\xf3n",name:"vehicle",rules:[{required:!0,message:"Seleccione un veh\xedculo"}],children:(0,z.jsx)(u.A,{placeholder:"Selecciona Veh\xedculo (solo VAN)",disabled:!G,value:R.getFieldValue("vehicle"),children:G&&(null===(a=L.find((e=>e.id===G)))||void 0===a?void 0:a.sm_vehicle.filter((e=>"VAN"===e.SM_VehicleType)).map((e=>(0,z.jsxs)(u.A.Option,{value:e.id,children:[e.SM_Model," - ",e.SM_DriverName]},e.id))))})})}),(0,z.jsx)(l.A,{xs:24,sm:24,md:8,lg:8,xl:5,className:"gutter-row",children:(0,z.jsx)(i.A.Item,{name:"drawerCaladas",label:"#Gavetas Caladas",rules:[{required:!0,message:"Por favor indique el n\xfamero de gavetas caladas"}],children:(0,z.jsx)(m.A,{value:R.getFieldValue("drawerCaladas"),onChange:e=>{R.setFieldsValue({drawerCaladas:e})}})})}),(0,z.jsx)(l.A,{xs:24,sm:24,md:8,lg:8,xl:5,className:"gutter-row",children:(0,z.jsx)(i.A.Item,{name:"drawerSolidas",label:"#Gavetas S\xf3lidas",rules:[{required:!0,message:"Por favor indique el n\xfamero de gavetas s\xf3lidas"}],children:(0,z.jsx)(m.A,{value:R.getFieldValue("drawerSolidas"),onChange:e=>{R.setFieldsValue({drawerSolidas:e})}})})})]}),(0,z.jsx)(o.A,{justify:"center",gutter:16,style:{marginBottom:15},children:(0,z.jsx)(l.A,{xs:24,sm:24,md:12,lg:12,xl:12,className:"gutter-row",children:(0,z.jsxs)("div",{style:{marginBottom:15},children:[(0,z.jsxs)(h.Button,{size:"default",type:"primary",onClick:()=>{R.validateFields().then((()=>{const e=new Set([...ae.map((e=>e.kitId)),...U.map((e=>e.SM_SecurityKits_ID&&e.SM_SecurityKits_ID.id)).filter((e=>void 0!==e&&null!==e))]),a=new Set([...ae.map((e=>e.vehicleId)),...U.map((e=>e.sm_vehicle_id)).filter((e=>void 0!==e&&null!==e))]),t=te.filter((a=>!e.has(a.id))),s=ie.filter((e=>!a.has(e.id)));if(t.length>0&&s.length>0){var i;const e=t[0],o=R.getFieldValue("vehicle");if(a.has(o))return void n.Ay.error("Este veh\xedculo ya est\xe1 asignado");const l=(null===(i=L.find((e=>e.id===G)))||void 0===i?void 0:i.sm_vehicle.find((e=>e.id===o)))||{},c={key:Date.now(),van:`${l.SM_Model||""} - ${l.SM_DriverName||""}`,kitCode:e.sm_kitcode,seal1:e.SM_Stamp1,seal2:e.SM_Stamp2,drawerCaladas:R.getFieldValue("drawerCaladas"),drawerSolidas:R.getFieldValue("drawerSolidas"),kitId:e.id,vehicleId:o};r((0,b.submitDrawerStampV2)(q,c,((e,a)=>{e?(re([...ae,c]),se(t.slice(1)),ne(s.filter((e=>e.id!==o))),R.resetFields(["vehicle","drawerCaladas","drawerSolidas"])):console.log(a)}))),R.resetFields(["vehicle","drawerCaladas","drawerSolidas"])}else n.Ay.error("No hay kits o veh\xedculos disponibles")})).catch((()=>{n.Ay.error("Revise los datos requeridos")}))},children:[(0,z.jsx)(k.A,{}),"Guardar"]}),(0,z.jsx)(h.Button,{size:"default",type:"default",onClick:()=>{ue()},children:"Cancelar"})]})})})]})}),(0,z.jsx)("div",{style:{marginBottom:15,marginTop:15},children:!W.showForm&&(0,z.jsxs)(h.Button,{size:"default",type:"primary",onClick:()=>{Y({...W,showForm:!0,form:{...W.form,sealId:null,seal:null,van:null,drawers:0}})},children:[(0,z.jsx)(I.A,{}),"Nuevo Furg\xf3n"]})}),(0,z.jsx)(D.default,{tableData:ae,columns:oe,rowSelection:!1},"furgon")]})})})})})},{title:"Resumen",className:"wizard-step-item",icon:(0,z.jsx)(y.A,{}),content:"finish"!==le?(0,z.jsxs)(A.Cards,{bodyStyle:{borderRadius:10},headless:!0,children:[(0,z.jsxs)(A.Cards,{headless:!0,children:[(0,z.jsxs)(S.default,{as:"h4",children:["1. Datos de la Coordinaci\xf3n ",P&&(0,z.jsx)(d.A,{})]}),(0,z.jsx)(M.default,{data:he,pairsPerRow:2})]}),(0,z.jsxs)(A.Cards,{headless:!0,children:[(0,z.jsx)("div",{children:(0,z.jsx)(S.default,{as:"h5",children:"2. Informaci\xf3n de Gavetas"})}),(0,z.jsxs)(o.A,{gutter:18,children:[(0,z.jsx)(l.A,{sm:6,xs:24,children:(0,z.jsx)(M.default,{data:fe,pairsPerRow:1})}),(0,z.jsx)(l.A,{sm:18,xs:24,children:(0,z.jsx)(D.default,{tableData:ae,columns:oe,rowSelection:!1},"furgon")})]})]})]}):(0,z.jsx)(o.A,{justify:"center",style:{width:"100%"},children:(0,z.jsx)(l.A,{xl:21,xs:24,children:(0,z.jsx)("div",{className:"checkout-successful",children:(0,z.jsx)(A.Cards,{headless:!0,bodyStyle:{borderRadius:"20px"},children:(0,z.jsxs)(A.Cards,{headless:!0,children:[(0,z.jsx)("span",{className:"icon-success",children:(0,z.jsx)(v.A,{})}),(0,z.jsx)(S.default,{as:"h3",children:"Informaci\xf3n de Gavetas enviada"})]})})})})})}],onNext:()=>(console.log(`current ${de}`),new Promise(((e,a)=>{void 0===de||null===de?(Y({...W,status:"process",current:0}),e()):0===de?(Y({...W,status:"process",current:de+1}),e()):1===de?R.validateFields().then((()=>{r((0,b.submitDrawer)(q,W.drawerForm,((r,t)=>{r?(n.Ay.success("Informaci\xf3n de gavetas actualizada!"),Y({...W,status:"process",current:2}),e()):(n.Ay.error(t),a(t))})))})).catch((e=>{n.Ay.error("Revise los datos requeridos!"),a(e)})):(n.Ay.error(`Debe registrar al menos ${W.suggestedDrawerCount} gavetas.`),a())}))),onPrev:()=>new Promise(((e,a)=>{console.log(de),de>0?(Y({...W,status:"process",current:de-1}),e()):a()})),onDone:()=>{if(!W.sm_ice||!W.sm_metabisulfite||!W.selectedTreater)return void n.Ay.error("Por favor completa todos los campos correctamente.");window.confirm("Confirma que desea enviar esta informaci\xf3n de Gavetas?")&&r((0,b.sendDrawerInfo)(q,B.SM_Coordination_ID.id,W.selectedTreater,W.sm_ice,W.sm_metabisulfite,((e,a)=>{e?(Y({...W,status:"finish",isFinished:!0,current:0,sm_ice:void 0,sm_metabisulfite:void 0,selectedTreater:void 0}),n.Ay.success("Informaci\xf3n de gavetas enviada correctamente.")):n.Ay.error(`Error: ${a}`)})))},isfinished:ce})})})})})})})})})})})]})}},88439:(e,a,r)=>{r.r(a),r.d(a,{fetchFishingDrawerInfo:()=>u,fetchOrgBins:()=>c,fetchOrgFishingDrawerStamp:()=>m,fetchOrgSecurityKits:()=>d,fetchTreaters:()=>h});var t=r(92759),s=r(70811),i=r(63593),n=r.n(i),o=r(94226),l=r(77003);const c=()=>async e=>{e((0,o.fetchOrgBinsLoading)());try{const a=n().get("orgId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const r=await s.DataService.get(`/models/sm_fishingbin?$filter=AD_Org_ID eq ${a}`);if(r.data&&r.data.records){const a=r.data.records.sort(((e,a)=>Number(e.Name)-Number(a.Name)));e((0,o.fetchOrgBinsSuccess)(a))}else e((0,o.fetchOrgBinsError)("No se encontraron bines para esta organizaci\xf3n."))}catch(a){e((0,o.fetchOrgBinsError)(a.message||"Error al cargar los bines.")),t.Ay.error(`Error al cargar los bines: ${a.message}`)}},d=e=>async a=>{a((0,o.fetchOrgSecurityKitsLoading)());try{const r=n().get("orgId");if(!r)throw new Error("Org ID no encontrado en las cookies.");const t=await s.DataService.get(`/models/SM_SecurityKits?$filter=AD_Org_ID eq ${r} AND sm_kittype eq '${e}' &$orderby=sm_kitcode`);t.data&&t.data.records?a((0,o.fetchOrgSecurityKitsSuccess)(t.data.records)):a((0,o.fetchOrgSecurityKitsError)("No se encontraron Security Kits para esta organizaci\xf3n."))}catch(r){(0,l.handleApiError)(r,a,o.fetchOrgSecurityKitsError)}},m=()=>async e=>{e((0,o.fetchOrgFishingDrawerStampLoading)());try{const a=n().get("orgId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const r=await s.DataService.get(`/models/sm_fishingdrawerstamp?$filter=AD_Org_ID eq ${a}`);r.data&&r.data.records?e((0,o.fetchOrgFishingDrawerStampSuccess)(r.data.records)):e((0,o.fetchOrgFishingDrawerStampError)("No se encontraron Fishing Drawer Stamps para esta organizaci\xf3n."))}catch(a){(0,l.handleApiError)(a,e,o.fetchOrgSecurityKitsError)}},u=e=>async a=>{a((0,o.fetchFishingDrawerInfoLoading)());try{const r=(await s.DataService.get(`/models/sm_coordinations_view?$filter=ci_id eq ${e}`)).data.records[0].SM_Fishing_ID.id,t=await s.DataService.get(`/models/sm_fishingdrawer_info_v?$filter=SM_Fishing_ID eq ${r}`);t.data&&t.data.records?(console.log(t.data.records),a((0,o.fetchFishingDrawerInfoSuccess)(t.data.records))):a((0,o.fetchFishingDrawerInfoError)("No se encontr\xf3 informaci\xf3n de Fishing Drawer."))}catch(r){(0,l.handleApiError)(r,a,o.fetchOrgSecurityKitsError)}},h=()=>async e=>{e((0,o.fetchTreatersLoading)());try{const a=n().get("selectedClientId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const r=await s.DataService.get(`/models/sm_treaters_info_v?$filter=AD_Client_ID eq ${a}`);if(r.data&&r.data.records){const a=r.data.records.map((e=>({label:e.user_name,value:e.AD_User_ID.id})));e((0,o.fetchTreatersSuccess)(a))}else e((0,o.fetchTreatersError)("No se encontraron tratadores en esta organizaci\xf3n."))}catch(a){(0,l.handleApiError)(a,e,o.fetchOrgSecurityKitsError)}}},99985:(e,a,r)=>{r.d(a,{A:()=>O});var t=r(58168),s=r(5544),i=r(64467),n=r(30767),o=r(41967),l=r(58143),c=r(57560),d=r(94118),m=r(53557),u=r(27379),h=r(17334),f=r(82278),p=r(48738),g=r.n(p),v=r(2144),x=r(9950),w=r(5741),y=r(27373),S=r(39156),A=r(23029),j=r(92901),b=r(56822),_=r(52176),C=r(53954),D=r(85501);const I=function(e){function a(){var e,r,t,s;return(0,A.A)(this,a),r=this,t=a,s=arguments,t=(0,C.A)(t),(e=(0,b.A)(r,(0,_.A)()?Reflect.construct(t,s||[],(0,C.A)(r).constructor):t.apply(r,s))).state={error:void 0,info:{componentStack:""}},e}return(0,D.A)(a,e),(0,j.A)(a,[{key:"componentDidCatch",value:function(e,a){this.setState({error:e,info:a})}},{key:"render",value:function(){var e=this.props,a=e.message,r=e.description,t=e.children,s=this.state,i=s.error,n=s.info,o=n&&n.componentStack?n.componentStack:null,l="undefined"===typeof a?(i||"").toString():a,c="undefined"===typeof r?o:r;return i?x.createElement(O,{type:"error",message:l,description:x.createElement("pre",null,c)}):t}}]),a}(x.Component);var k=function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(t=Object.getOwnPropertySymbols(e);s<t.length;s++)a.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]])}return r},N={success:n.A,info:h.A,error:l.A,warning:m.A},E={success:o.A,info:f.A,error:c.A,warning:u.A},F=function(e){var a=e.description,r=e.icon,t=e.prefixCls,s=e.type,n=(a?E:N)[s]||null;return r?(0,S.fx)(r,x.createElement("span",{className:"".concat(t,"-icon")},r),(function(){return{className:g()("".concat(t,"-icon"),(0,i.A)({},r.props.className,r.props.className))}})):x.createElement(n,{className:"".concat(t,"-icon")})},$=function(e){var a=e.isClosable,r=e.closeText,t=e.prefixCls,s=e.closeIcon,i=e.handleClose;return a?x.createElement("button",{type:"button",onClick:i,className:"".concat(t,"-close-icon"),tabIndex:0},r?x.createElement("span",{className:"".concat(t,"-close-text")},r):s):null},M=function(e){var a=e.description,r=e.prefixCls,n=e.message,o=e.banner,l=e.className,c=void 0===l?"":l,m=e.style,u=e.onMouseEnter,h=e.onMouseLeave,f=e.onClick,p=e.afterClose,S=e.showIcon,A=e.closable,j=e.closeText,b=e.closeIcon,_=void 0===b?x.createElement(d.A,null):b,C=e.action,D=k(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),I=x.useState(!1),N=(0,s.A)(I,2),E=N[0],M=N[1],O=x.useRef(),T=x.useContext(w.QO),z=T.getPrefixCls,B=T.direction,P=z("alert",r),V=function(e){var a;M(!0),null===(a=D.onClose)||void 0===a||a.call(D,e)},q=!!j||A,L=function(){var e=D.type;return void 0!==e?e:o?"warning":"info"}(),K=!(!o||void 0!==S)||S,G=g()(P,"".concat(P,"-").concat(L),(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},"".concat(P,"-with-description"),!!a),"".concat(P,"-no-icon"),!K),"".concat(P,"-banner"),!!o),"".concat(P,"-rtl"),"rtl"===B),c),H=(0,y.A)(D);return x.createElement(v.Ay,{visible:!E,motionName:"".concat(P,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:p},(function(e){var r=e.className,s=e.style;return x.createElement("div",(0,t.A)({ref:O,"data-show":!E,className:g()(G,r),style:(0,t.A)((0,t.A)({},m),s),onMouseEnter:u,onMouseLeave:h,onClick:f,role:"alert"},H),K?x.createElement(F,{description:a,icon:D.icon,prefixCls:P,type:L}):null,x.createElement("div",{className:"".concat(P,"-content")},n?x.createElement("div",{className:"".concat(P,"-message")},n):null,a?x.createElement("div",{className:"".concat(P,"-description")},a):null),C?x.createElement("div",{className:"".concat(P,"-action")},C):null,x.createElement($,{isClosable:!!q,closeText:j,prefixCls:P,closeIcon:_,handleClose:V}))}))};M.ErrorBoundary=I;const O=M}}]);