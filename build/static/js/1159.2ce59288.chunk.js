"use strict";(self.webpackChunkHexaDash=self.webpackChunkHexaDash||[]).push([[1159],{61159:(e,a,s)=>{s.r(a),s.d(a,{default:()=>I});var r=s(9950),i=s(57687),t=s(87094),n=s(41988),l=s(32212),d=s(75871),c=s(50558),o=s(72896),m=s(28429),h=s(73878),u=s(42017),g=s(29355),x=s(67482),f=s(68826),y=s(63593),S=s.n(y),p=s(59051),v=s.n(p),_=s(41013),j=(s(15285),s(88439)),w=s(44414);const b=[{title:"No. Bin",dataIndex:"bin",key:"bin"},{title:"Kit de Seguridad",dataIndex:"sm_kitcode",key:"sm_kitcode"},{title:"Sello 1",dataIndex:"seal1",key:"seal1"},{title:"Sello 2",dataIndex:"seal2",key:"seal2"},{title:"Sello 3",dataIndex:"seal3",key:"seal3"},{title:"Sello 4",dataIndex:"seal4",key:"seal4"}],k=[{title:"Furg\xf3n",dataIndex:"van",key:"van"},{title:"Kit de Seguridad",dataIndex:"kitCode",key:"kitCode"},{title:"Sello 1",dataIndex:"seal1",key:"seal1"},{title:"Sello 2",dataIndex:"seal2",key:"seal2"},{title:"Gavetas Caladas",dataIndex:"drawerCaladas",key:"drawerCaladas"},{title:"Gavetas S\xf3lidas",dataIndex:"drawerSolidas",key:"drawerSolidas"}],D=[{title:"",dataIndex:"label",key:"label",width:"45%",render:e=>(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,w.jsx)("span",{style:{height:"5px",width:"5px",backgroundColor:"#012e40",borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),(0,w.jsx)("span",{children:e})]})},{title:"",dataIndex:"value",key:"value",width:"55%"}];const I=function(){var e;const{organizationSecurityKits:a=[],organizationFishingDrawerStamp:s=[],fishingDrawerInfo:y,fishingDrawerInfoLoading:p,treaters:I,treatersLoading:N}=(0,h.d4)((e=>e.bin_drawers||{})),[C,A]=(0,r.useState)([]);(0,r.useEffect)((()=>{if(!p&&y.length>0){const e=y.map((e=>({van:e.sm_furgon,kitCode:e.sm_kitcode,seal1:e.SM_Stamp1,seal2:e.SM_Stamp2,drawerCaladas:e.sm_kdrawerscount,drawerSolidas:e.sm_sdrawerscount})));A(e)}}),[y,p]);const M=[{path:"index",breadcrumbName:S().get("orgName")},{path:"first",breadcrumbName:"Coordinaci\xf3n"}],O=(0,h.wA)();(0,m.Zp)();let{id:E}=(0,m.g)();const $=(0,h.d4)((e=>e.custody.coordination)),F=(0,h.d4)((e=>e.custody.bines)),B=((0,h.d4)((e=>e.custody.drawer)),(0,h.d4)((e=>e.custody.drawerStamps)));console.log(F);const[K,T]=(0,r.useState)({status:"process",isFinished:!1,current:0,form:{}});(0,r.useEffect)((()=>{O((0,f.loadCustodyCoord)(E,(()=>{}))),O((0,f.loadBinesByCoord)(E,(()=>{}))),O((0,f.loadDrawerByCoord)(E,(()=>{}))),O((0,f.loadDrawerStampByCoord)(E,(()=>{}))),O((0,j.fetchFishingDrawerInfo)(E))}),[O,E]);const z=F?F.map((e=>({bin:(0,w.jsx)("span",{children:e.bin_name}),sm_kitcode:(0,w.jsx)("span",{children:e.sm_kitcode||"NA"}),seal1:(0,w.jsx)("span",{children:e.SM_Stamp1}),seal2:(0,w.jsx)("span",{children:e.SM_Stamp2}),seal3:(0,w.jsx)("span",{children:e.SM_Stamp3}),seal4:(0,w.jsx)("span",{children:e.SM_Stamp4})}))):[],Y=(B&&B.map((e=>({van:(0,w.jsx)("span",{children:e.SM_Van}),stamp:(0,w.jsx)("span",{children:e.SM_Stamp}),drawers:(0,w.jsx)("span",{children:e.SM_DrawersCount})}))),[{key:"1",label:"Direcci\xf3n:",value:$?`${$.City} ${$.Address1}, ${$.Address2||"N/A"}`:"-"},{key:"2",label:"Notificaci\xf3n de Pesca:",value:$?$.SM_FishingNotification:"-"},{key:"3",label:"Fecha de Pesca Solicitada:",value:$?v()($.planned_date).format("DD-MM-YYYY hh:mm A"):"-"},{key:"4",label:"Tipo de Pesca:",value:$?$.fishing_type:"-"},{key:"5",label:"Tipo de Contenedor:",value:$?$.container_type:"-"},{key:"6",label:"Volumen de Pesca:",value:$?`${$.fishing_volume} lbs`:"-"},{key:"7",label:"Clasificaci\xf3n:",value:$?$.Classification:"-"},{key:"8",label:"Textura:",value:$?$.texture:"-"}]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.PageHeader,{onBack:()=>window.history.back(),title:`Coordinaci\xf3n: ${$?$.SM_FishingNotification:"-"}`,routes:M}),(0,w.jsx)(x.Main,{children:(0,w.jsxs)(t.A,{gutter:25,children:[(0,w.jsx)(n.A,{xl:10,xs:24,style:{display:"flex"},children:(0,w.jsx)(r.Suspense,{fallback:(0,w.jsx)(g.Cards,{headless:!0,children:(0,w.jsx)(l.A,{active:!0})}),children:(0,w.jsxs)(g.Cards,{title:"Coordinaci\xf3n ",size:"large",children:[(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,w.jsx)(d.A,{style:{backgroundColor:"#0e92e7",marginRight:"10px"},children:(null===$||void 0===$||null===(e=$.org_name)||void 0===e?void 0:e[0])||""}),(0,w.jsx)(c.A.Title,{level:5,children:(null===$||void 0===$?void 0:$.org_name)||"EcSSA Manab\xed"}),(null===$||void 0===$?void 0:$.warehouse_name)||""]}),(0,w.jsx)("br",{}),(0,w.jsx)(n.A,{xs:24,md:24,children:(0,w.jsx)(o.A,{className:"custom-table_lab",dataSource:Y,columns:D,pagination:!1,showHeader:!1,bordered:!0,rowClassName:()=>"custom-table-row"})})]})})}),(0,w.jsx)(n.A,{xl:14,xs:24,children:(0,w.jsx)(r.Suspense,{fallback:(0,w.jsx)(g.Cards,{headless:!0,children:(0,w.jsx)(l.A,{active:!0})}),children:(0,w.jsxs)(g.Cards,{title:"Informaci\xf3n de la Empacadora",size:"large",children:[(0,w.jsx)(t.A,{gutter:16,style:{marginBottom:"16px"},children:(0,w.jsx)(n.A,{xs:24,sm:24,md:24,lg:24,children:(0,w.jsx)(x.OrderSummary,{children:(0,w.jsx)("div",{className:"invoice-summary-inner",children:(0,w.jsx)("ul",{className:"summary-list",children:(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Fecha y Hora de Pesca Confirmada :"}),(0,w.jsx)("span",{className:"summary-list-text",children:$?v()($.answered_date).format("DD-MM-YYYY hh:mm A"):""})]})})})})})}),"BINES"===(null===$||void 0===$?void 0:$.container_type)&&(0,w.jsxs)("div",{className:"atbd-review-order__single",children:[(0,w.jsx)(x.OrderSummary,{children:(0,w.jsx)("div",{className:"invoice-summary-inner",children:(0,w.jsxs)("ul",{className:"summary-list",children:[(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Tratador:"}),(0,w.jsx)("span",{className:"summary-list-text",children:null===$||void 0===$?void 0:$.user_name})]}),(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Hielo (#Sacos) :"}),(0,w.jsx)("span",{className:"summary-list-text",children:null!==$&&void 0!==$&&$.SM_Ice?`${null===$||void 0===$?void 0:$.SM_Ice} saco${(null===$||void 0===$?void 0:$.SM_Ice)>1?"s":""}`:""})]}),(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Metabisulfitos (kg) :"}),(0,w.jsx)("span",{className:"summary-list-text",children:null!==$&&void 0!==$&&$.sm_metabisulfite?`${null===$||void 0===$?void 0:$.sm_metabisulfite} kg`:""})]})]})})}),(0,w.jsxs)(g.Cards,{headless:!0,children:[(0,w.jsx)(u.default,{as:"h5",children:"Informaci\xf3n de Bines"}),(0,w.jsx)(_.default,{tableData:z,columns:b,rowSelection:!1},"bin")]})]}),"GAVETAS"===(null===$||void 0===$?void 0:$.container_type)&&(0,w.jsx)("div",{className:"atbd-review-order__single",children:(0,w.jsxs)(g.Cards,{headless:!0,children:[(0,w.jsx)(u.default,{as:"h5",children:"Informaci\xf3n de Gavetas"}),(0,w.jsxs)(x.OrderSummary,{children:[(0,w.jsx)("div",{className:"invoice-summary-inner",children:(0,w.jsxs)("ul",{className:"summary-list",children:[(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Tratador:"}),(0,w.jsx)("span",{className:"summary-list-text",children:null===$||void 0===$?void 0:$.user_name})]}),(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Hielo (#Sacos) :"}),(0,w.jsx)("span",{className:"summary-list-text",children:null!==$&&void 0!==$&&$.SM_Ice?`${null===$||void 0===$?void 0:$.SM_Ice} saco${(null===$||void 0===$?void 0:$.SM_Ice)>1?"s":""}`:""})]}),(0,w.jsxs)("li",{children:[(0,w.jsx)("span",{className:"summary-list-title",children:"Metabisulfitos (kg) :"}),(0,w.jsx)("span",{className:"summary-list-text",children:null!==$&&void 0!==$&&$.sm_metabisulfite?`${null===$||void 0===$?void 0:$.sm_metabisulfite} kg`:""})]})]})}),(0,w.jsx)(_.default,{tableData:C,columns:k,rowSelection:!1},"furgon")]})]})})]})})})]})})]})}},88439:(e,a,s)=>{s.r(a),s.d(a,{fetchFishingDrawerInfo:()=>h,fetchOrgBins:()=>c,fetchOrgFishingDrawerStamp:()=>m,fetchOrgSecurityKits:()=>o,fetchTreaters:()=>u});var r=s(92759),i=s(70811),t=s(63593),n=s.n(t),l=s(94226),d=s(77003);const c=()=>async e=>{e((0,l.fetchOrgBinsLoading)());try{const a=n().get("orgId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const s=await i.DataService.get(`/models/sm_fishingbin?$filter=AD_Org_ID eq ${a}`);if(s.data&&s.data.records){const a=s.data.records.sort(((e,a)=>Number(e.Name)-Number(a.Name)));e((0,l.fetchOrgBinsSuccess)(a))}else e((0,l.fetchOrgBinsError)("No se encontraron bines para esta organizaci\xf3n."))}catch(a){e((0,l.fetchOrgBinsError)(a.message||"Error al cargar los bines.")),r.Ay.error(`Error al cargar los bines: ${a.message}`)}},o=e=>async a=>{a((0,l.fetchOrgSecurityKitsLoading)());try{const s=n().get("orgId");if(!s)throw new Error("Org ID no encontrado en las cookies.");const r=await i.DataService.get(`/models/SM_SecurityKits?$filter=AD_Org_ID eq ${s} AND sm_kittype eq '${e}' &$orderby=sm_kitcode`);r.data&&r.data.records?a((0,l.fetchOrgSecurityKitsSuccess)(r.data.records)):a((0,l.fetchOrgSecurityKitsError)("No se encontraron Security Kits para esta organizaci\xf3n."))}catch(s){(0,d.handleApiError)(s,a,l.fetchOrgSecurityKitsError)}},m=()=>async e=>{e((0,l.fetchOrgFishingDrawerStampLoading)());try{const a=n().get("orgId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const s=await i.DataService.get(`/models/sm_fishingdrawerstamp?$filter=AD_Org_ID eq ${a}`);s.data&&s.data.records?e((0,l.fetchOrgFishingDrawerStampSuccess)(s.data.records)):e((0,l.fetchOrgFishingDrawerStampError)("No se encontraron Fishing Drawer Stamps para esta organizaci\xf3n."))}catch(a){(0,d.handleApiError)(a,e,l.fetchOrgSecurityKitsError)}},h=e=>async a=>{a((0,l.fetchFishingDrawerInfoLoading)());try{const s=(await i.DataService.get(`/models/sm_coordinations_view?$filter=ci_id eq ${e}`)).data.records[0].SM_Fishing_ID.id,r=await i.DataService.get(`/models/sm_fishingdrawer_info_v?$filter=SM_Fishing_ID eq ${s}`);r.data&&r.data.records?(console.log(r.data.records),a((0,l.fetchFishingDrawerInfoSuccess)(r.data.records))):a((0,l.fetchFishingDrawerInfoError)("No se encontr\xf3 informaci\xf3n de Fishing Drawer."))}catch(s){(0,d.handleApiError)(s,a,l.fetchOrgSecurityKitsError)}},u=()=>async e=>{e((0,l.fetchTreatersLoading)());try{const a=n().get("selectedClientId");if(!a)throw new Error("Org ID no encontrado en las cookies.");const s=await i.DataService.get(`/models/sm_treaters_info_v?$filter=AD_Client_ID eq ${a}`);if(s.data&&s.data.records){const a=s.data.records.map((e=>({label:e.user_name,value:e.AD_User_ID.id})));e((0,l.fetchTreatersSuccess)(a))}else e((0,l.fetchTreatersError)("No se encontraron tratadores en esta organizaci\xf3n."))}catch(a){(0,d.handleApiError)(a,e,l.fetchOrgSecurityKitsError)}}}}]);